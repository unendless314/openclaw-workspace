---
name: kimi-agent
description: Run Kimi CLI (kimi-cli) by Moonshot AI for coding, analysis, and task automation via programmatic control.
metadata:
  {
    "openclaw": { "emoji": "ğŸŒ™", "requires": { "anyBins": ["kimi"] } },
  }
---

# Kimi Agent (kimi-cli)

**Moonshot AI** çš„å‘½ä»¤è¡Œä»£ç†å·¥å…·ï¼Œå°ˆç‚º OpenClaw ç’°å¢ƒå„ªåŒ–ã€‚
æ”¯æ´ä»£ç¢¼åˆ†æã€è‡ªå‹•åŒ–é–‹ç™¼èˆ‡è¤‡é›œé‚è¼¯æ¨ç†ã€‚

## ğŸš€ å®‰è£

```bash
# ä½¿ç”¨ uv å®‰è£ï¼ˆéœ€ Python 3.13+ï¼‰
uv tool install --python 3.13 kimi-cli

# é¦–æ¬¡ä½¿ç”¨éœ€è¨­å®š API Key
kimi
# è¼¸å…¥ /setup ä¸¦å¡«å…¥ Moonshot API Key
```

## ğŸ› ï¸ æ ¸å¿ƒæŒ‡ä»¤æ ¼å¼

æ‰€æœ‰æ“ä½œé€é `exec` å·¥å…·åŸ·è¡Œï¼Œ**å¿…é ˆ**ä½¿ç”¨ `--print` å•Ÿç”¨éäº’å‹•æ¨¡å¼ã€‚

```bash
# åŸºæœ¬èªæ³•
exec command:"kimi --print [OPTIONS] -w <DIR> -p '<PROMPT>'"

# å¸¸ç”¨é¸é …
--print       # å¿…é¸ï¼šéäº’å‹•æ¨¡å¼ï¼ˆéš±å¼å•Ÿç”¨ --yoloï¼‰
-w <DIR>      # å¿…é¸ï¼šå·¥ä½œç›®éŒ„ï¼ˆSession ç¶å®šæ–¼æ­¤è·¯å¾‘ï¼‰
-p '<PROMPT>' # å¿…é¸ï¼šæŒ‡ä»¤å…§å®¹
-C            # æ¥çºŒåŒä¸€ç›®éŒ„çš„æœ€è¿‘å°è©±
--thinking    # å•Ÿç”¨å¼·åŒ–æ¨ç†ï¼ˆæ¶æ§‹è¨­è¨ˆ/è¤‡é›œ Bugï¼‰
--quiet       # åƒ…è¼¸å‡ºçµæœï¼ˆæ¸›å°‘ Tokenï¼‰
```

## ğŸ“‹ é—œéµå·¥ä½œæµç¨‹

### 1. å°ˆæ¡ˆåˆå§‹åŒ–

é€²å…¥é™Œç”Ÿå°ˆæ¡ˆæ™‚ï¼Œå…ˆå»ºç«‹ `AGENTS.md` è®“ Kimi ç†è§£æ¶æ§‹ï¼š

```bash
# äº’å‹•æ¨¡å¼ï¼ˆå»ºè­°é¦–æ¬¡ä½¿ç”¨æ™‚äººå·¥æ“ä½œï¼‰
kimi -w /path/to/project
# è¼¸å…¥: /init
```

### 2. é–‹ç™¼å¾ªç’°

```bash
# Step 1: è¦åŠƒï¼ˆæ–° Sessionï¼‰
exec command:"kimi --print -w . -p 'åˆ†æéœ€æ±‚ï¼Œè¦åŠƒ auth æ¨¡çµ„å¯¦ä½œæ­¥é©Ÿ'"

# Step 2: åŸ·è¡Œï¼ˆå¸¶ä¸Šä¸‹æ–‡ï¼‰
exec command:"kimi --print -C -w . -p 'å¯¦ä½œç¬¬ä¸€æ­¥ï¼šå»ºç«‹ interfaces/auth.ts'"

# Step 3: é©—æ”¶ â†’ Git Commit â†’ é–‹æ–° Session ç¹¼çºŒä¸‹ä¸€å€‹ä»»å‹™
```

### 3. èƒŒæ™¯ä»»å‹™ï¼ˆè€—æ™‚æ“ä½œï¼‰

```bash
# å•Ÿå‹•èƒŒæ™¯ä»»å‹™
exec command:"kimi --print -y -w . -p 'ç‚ºæ‰€æœ‰ utils å‡½å¼è£œå…¨å–®å…ƒæ¸¬è©¦'" background:true

# ç›£æ§é€²åº¦ï¼ˆå¾å›å‚³å–å¾— sessionIdï¼‰
process action:log sessionId:XXX
process action:poll sessionId:XXX
```

### 4. å¸¸è¦‹ä»»å‹™ç¯„ä¾‹

```bash
# ä»£ç¢¼å¯©æŸ¥
exec command:"kimi --print -w . -p 'å¯©æŸ¥ src/auth.ts çš„ç¨‹å¼ç¢¼å“è³ª'"

# é‡æ§‹
exec command:"kimi --print -y -w . -p 'å°‡æ‰€æœ‰ console.log æ›¿æ›ç‚º winston æ—¥èªŒ'"

# Bug ä¿®å¾©ï¼ˆå•Ÿç”¨ thinking æ¨¡å¼ï¼‰
exec command:"kimi --print --thinking -y -w . -p 'åˆ†æ error.log ä¸¦ä¿®å¾©æ ¹æœ¬å•é¡Œ'"
```

## ğŸ§  Session ç®¡ç†ç­–ç•¥

Kimi çš„è¡¨ç¾æœƒéš¨ Context é•·åº¦å¢åŠ è€Œä¸‹é™ï¼ˆå¹»è¦ºé¢¨éšªä¸Šå‡ï¼‰ã€‚
å¾è¼¸å‡ºä¸­çš„ `context_usage` æ•¸å€¼åˆ¤æ–·ï¼š

| å·²ä½¿ç”¨ç‡ | ç‹€æ…‹ | å»ºè­°åšæ³• |
|---------|------|---------|
| < 50% | ğŸŸ¢ å¥åº· | ä½¿ç”¨ `-C` ç¹¼çºŒåŸ·è¡Œ |
| 50-70% | ğŸŸ¡ æ³¨æ„ | è©•ä¼°ä»»å‹™è¤‡é›œåº¦å¾Œæ±ºå®š |
| 70-85% | ğŸŸ  å»ºè­° | **Git Commit ä¸¦é–‹æ–° Session**ï¼ˆç§»é™¤ `-C`ï¼‰ |
| > 85% | ğŸ”´ è­¦å‘Š | **å¿…é ˆé‡ç½®**ï¼š`/compact` ç¹¼çºŒ æˆ– é–‹æ–° Session |

**é—œéµå¿ƒæ³•**ï¼šé‡ç½®æœ¬èº«ä¹Ÿæœ‰æˆæœ¬ï¼ˆé‡æ–°è¼‰å…¥å°ˆæ¡ˆçµæ§‹ï¼‰ã€‚çŒ¶è±«æ™‚ï¼Œå¯§é¡˜æ—©é» commit é–‹æ–° sessionã€‚

## ğŸ¯ æ€è€ƒæ¨¡å¼ (--thinking)

| é©åˆä½¿ç”¨ | ä¸é©åˆä½¿ç”¨ |
|---------|-----------|
| ç³»çµ±æ¶æ§‹è¨­è¨ˆ | ç°¡å–® CRUD |
| è¤‡é›œä½µç™¼/ç•°æ­¥é‚è¼¯ | æ ¼å¼åŒ–/æ¨£å¼èª¿æ•´ |
| é›£è§£ Bug åˆ†æ | æª”æ¡ˆæŸ¥æ‰¾ |
| å¤šæ­¥é©Ÿæ¨ç†å•é¡Œ | å–®é»ä¿®æ”¹ |

**ä»£åƒ¹**ï¼šå›æ‡‰è¼ƒæ…¢ã€Token æ¶ˆè€—å€å¢ã€‚

## âš ï¸ å¸¸è¦‹å•é¡Œæ’é™¤

| å•é¡Œ | åŸå›  | è§£æ³• |
|-----|------|-----|
| æ‰¾ä¸åˆ°ä¸Šä¸‹æ–‡ | `-w` è·¯å¾‘è®Šæ›´æˆ–å¿˜è¨˜ `-C` | ç¢ºèªè·¯å¾‘å®Œå…¨ä¸€è‡´ï¼›æª¢æŸ¥ `~/.kimi/sessions/` |
| æŒ‡ä»¤å¡ä½ | æœªåŠ  `--print` | ç¢ºä¿æ‰€æœ‰ `exec` éƒ½åŒ…å« `--print` |
| ä»£ç¢¼å“è³ªä¸‹é™ | Session éé•· | `git reset --hard` â†’ ç§»é™¤ `-C` â†’ é‡æ–°åˆ†æ |

## ğŸ“‚ æª”æ¡ˆèˆ‡è·¯å¾‘

- Session å„²å­˜ï¼š`~/.kimi/sessions/`ï¼ˆä¾å·¥ä½œç›®éŒ„ Hash åˆ†é¡ï¼‰
- è¨­å®šæª”ï¼š`~/.kimi/config.toml`
- æ—¥èªŒï¼š`~/.kimi/logs/kimi.log`

## Resources

- **å®˜æ–¹æ–‡ä»¶**: https://moonshotai.github.io/kimi-cli/
- **LLM å‹å¥½ç‰ˆæœ¬**: https://moonshotai.github.io/kimi-cli/llms.txt
